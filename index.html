<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Spanish Practice</title>
<style>
  :root{
    --bg:#d6ecff;
    --card:#ffffff;
    --accent:#3a8bff;
    --muted:#5c6b7a;
    --radius:14px;
    font-family: Inter, system-ui, Arial;
  }
  body{
    margin:0; padding:20px;
    font-family:Inter,sans-serif;
    background:linear-gradient(180deg,#b8dbff 0%, #d6ecff 60%);
    overflow-x:hidden;
    position:relative;
  }
  body::before{
    content:"";
    position:fixed;
    top:0; left:0; width:200%; height:100%;
    background: url('https://i.ibb.co/0n9kJxG/clouds.png') repeat-x;
    background-size:cover;
    animation:moveClouds 120s linear infinite;
    z-index:-1;
  }
  @keyframes moveClouds { 0%{transform:translateX(0);} 100%{transform:translateX(-50%);} }
  .container{ max-width:900px; margin:auto; }
  .banner{ background:var(--accent); color:white; padding:12px; border-radius:var(--radius); text-align:center; font-weight:600; margin-bottom:20px; }
  .nav{ display:flex; gap:10px; margin-bottom:20px; }
  .nav button{ flex:1; padding:12px; border:none; border-radius:var(--radius); background:#ffffffaa; cursor:pointer; font-size:16px; }
  .nav button.active{ background:var(--accent); color:white; }
  .panel{display:none;}
  .panel.active{display:block;}
  .card{ background:var(--card); padding:25px; border-radius:var(--radius); box-shadow:0 4px 12px rgba(0,0,0,0.1); margin-bottom:20px; }
  .btn{ padding:12px 20px; border:none; border-radius:var(--radius); background:var(--accent); color:white; cursor:pointer; font-size:16px; margin-top:10px; }
  .quiz-input{ width:100%; padding:12px; font-size:16px; border-radius:var(--radius); border:1px solid #ccc; }
  .muted{ color:var(--muted); }
  select{padding:8px 12px; border-radius:var(--radius); margin-bottom:10px;}
</style>
</head>
<body>
<div class="container">

  <div class="banner">Flip + Check — Enter, New Words + Next — Shift</div>

  <div class="nav">
    <button data-panel="flash" class="active">Flashcards</button>
    <button data-panel="quiz">Quiz</button>
    <button data-panel="lists">Word Lists</button>
  </div>

  <!-- FLASHCARDS -->
  <section id="flash" class="panel active">
    <div class="card">
      <label>Select List:</label>
      <select id="list-select"></select>
      <div id="flash-word" style="font-size:36px; margin-top:10px;">Press Next</div>
      <div id="flash-translation" style="font-size:24px; color:var(--muted); margin-top:10px;"></div>
      <button class="btn" onclick="flipFlash()">Flip</button>
      <button class="btn" style="background:#5c6b7a;" onclick="nextFlash()">Next</button>
    </div>
    <div class="card">
      <textarea id="import-text" placeholder="Paste words as: hola, hello&#10;adiós, goodbye" style="width:100%; padding:10px; border-radius:var(--radius); margin-top:10px;"></textarea>
      <button class="btn" onclick="importWords()">Import Words</button>
      <button class="btn" style="background:#5c6b7a;" onclick="exportWords()">Export Words</button>
    </div>
    <div class="card">
      <input type="text" id="new-list-name" placeholder="New list name" />
      <button class="btn" onclick="createList()">Create List</button>
    </div>
  </section>

  <!-- QUIZ -->
  <section id="quiz" class="panel">
    <div class="card">
      <label>Select List:</label>
      <select id="quiz-list-select"></select>
      <h2>Quiz Mode</h2>
      <div id="quiz-word" style="font-size:26px; margin-bottom:15px;">Press New Word</div>
      <input id="quiz-input" class="quiz-input" placeholder="English meaning..." />
      <button class="btn" onclick="checkQuiz()">Check</button>
      <button class="btn" style="background:#5c6b7a;" onclick="newQuiz()">New Word</button>
      <div id="quiz-result" style="margin-top:15px; font-size:20px;"></div>
    </div>
  </section>

  <!-- WORD LISTS -->
  <section id="lists" class="panel">
    <div class="card">
      <h2>Saved Words</h2>
      <ul id="word-list" class="muted"></ul>
    </div>
  </section>

</div>

<script>
  // Multiple lists storage
  let lists = JSON.parse(localStorage.getItem('spanish_lists')) || { "Default": [] };
  let currentList = "Default";
  saveLists();
  function saveLists(){ localStorage.setItem('spanish_lists', JSON.stringify(lists)); renderList(); renderListSelects(); }

  function renderList(){
    const ul = document.getElementById('word-list');
    ul.innerHTML='';
    if(!lists[currentList]) lists[currentList]=[];
    lists[currentList].forEach(w=>{
      const li=document.createElement('li');
      li.innerText=w.es+" → "+w.en;
      ul.appendChild(li);
    });
  }

  function renderListSelects(){
    const sel = document.getElementById('list-select');
    const sel2 = document.getElementById('quiz-list-select');
    sel.innerHTML=''; sel2.innerHTML='';
    Object.keys(lists).forEach(name=>{
      const opt1=document.createElement('option'); opt1.value=name; opt1.innerText=name;
      const opt2=document.createElement('option'); opt2.value=name; opt2.innerText=name;
      if(name===currentList){ opt1.selected=true; opt2.selected=true; }
      sel.appendChild(opt1); sel2.appendChild(opt2);
    });
  }

  document.getElementById('list-select').addEventListener('change', e=>{
    currentList = e.target.value;
    renderList();
  });
  document.getElementById('quiz-list-select').addEventListener('change', e=>{
    currentList = e.target.value;
    renderList();
  });

  function createList(){
    const name = document.getElementById('new-list-name').value.trim();
    if(!name) return;
    if(lists[name]) return alert('List already exists');
    lists[name]=[];
    currentList=name;
    document.getElementById('new-list-name').value='';
    saveLists();
  }

  // Flashcards
  let flashWord=null;
  function nextFlash(){
    if(!lists[currentList] || lists[currentList].length===0) return alert('Add words first!');
    flashWord = lists[currentList][Math.floor(Math.random()*lists[currentList].length)];
    document.getElementById('flash-word').innerText = flashWord.es;
    document.getElementById('flash-translation').innerText = '';
  }
  function flipFlash(){
    if(!flashWord) return;
    document.getElementById('flash-translation').innerText = flashWord.en;
  }

  // Import multiple words
  function importWords(){
    const text = document.getElementById('import-text').value.trim();
    if(!text) return;
    const lines = text.split('\n');
    if(!lists[currentList]) lists[currentList]=[];
    lines.forEach(line=>{
      const parts = line.split(',');
      if(parts.length>=2){
        lists[currentList].push({es:parts[0].trim(), en:parts[1].trim()});
      }
    });
    document.getElementById('import-text').value='';
    saveLists();
    alert('Words imported into '+currentList);
  }

  // Export
  function exportWords(){
    const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(lists[currentList], null, 2));
    const dlAnchor = document.createElement('a');
    dlAnchor.setAttribute("href", dataStr);
    dlAnchor.setAttribute("download", currentList+"_words.json");
    dlAnchor.click();
  }

  // Quiz
  let quizWord=null;
  function newQuiz(){
    if(!lists[currentList] || lists[currentList].length===0) return alert('Add words first!');
    quizWord = lists[currentList][Math.floor(Math.random()*lists[currentList].length)];
    document.getElementById('quiz-word').innerText = quizWord.es;
    document.getElementById('quiz-input').value='';
    document.getElementById('quiz-result').innerText='';
  }
  function checkQuiz(){
    if(!quizWord) return;
    const ans = document.getElementById('quiz-input').value.trim().toLowerCase();
    const res = document.getElementById('quiz-result');
    if(ans===quizWord.en.toLowerCase()){ res.innerText='Correct!'; res.style.color='green'; }
    else{ res.innerText='Wrong! It means: '+quizWord.en; res.style.color='red'; }
  }

  // Navigation
  document.querySelectorAll('.nav button').forEach(btn=>{
    btn.onclick=()=>{
      document.querySelectorAll('.nav button').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const panel=btn.dataset.panel;
      document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
      document.getElementById(panel).classList.add('active');
    }
  });

  // Keyboard shortcuts
  document.addEventListener('keydown', (e)=>{
    if(e.key==='Enter'){
      const flashPanel = document.getElementById('flash').classList.contains('active');
      const quizPanel = document.getElementById('quiz').classList.contains('active');
      if(flashPanel){ flipFlash(); }
      if(quizPanel){ checkQuiz(); }
      e.preventDefault();
    }
    if(e.key==='Shift'){
      const flashPanel = document.getElementById('flash').classList.contains('active');
      const quizPanel = document.getElementById('quiz').classList.contains('active');
      if(flashPanel){ nextFlash(); }
      if(quizPanel){ newQuiz(); }
      e.preventDefault();
    }
  });
</script>
</body>
</html>
